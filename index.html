<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>ZOMBO</title>
  </head>
  <body>
        <!--

            HTML5zombo.com
            Bertrand Fan (bertrand@fan.net)
            5/19/2010

            I wanted zombo.com on my iPad. That is all.

            ===================================================================
            How I did it, for nerds:
            ===================================================================

            Watched the Net tab for zombo.com in Firebug

            wget http://www.zombo.com/inrozxa.swf
            wget http://www.zombo.com/welcomeclip.swf

            Opened them in SWFRIP to extract the MP3 and SVG representations of the logo and spinner.
            Opened the SVG files in Adobe Illustrator (ironic, I know), tweaked a bit, exported new SVG files

            Copy-pasted the SVG contents into this HTML file, tweaked the attributes a bit

            Wrote the JS code to rotate the SVG spinner

            Converted the MP3 to OGG using oggenc2 (not really necessary for the iPad, but apparently for Firefox)

            Discovered that the iPad does not respect autoplay on HTML5 audio tags, crafted a javascript link for iPads

            wget http://www.zombo.com/favicon.ico

            ===================================================================
            References:
            ===================================================================

            http://www.zombo.com/
            http://twitter.com/zombocom
            http://sourceforge.net/projects/swfrip/
            http://developer.apple.com/safari/library/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/AudioandVideoTagBasics/AudioandVideoTagBasics.html
            http://html5doctor.com/native-audio-in-the-browser/
            http://emacsformacosx.com/
            http://www.apple.com/hotnews/thoughts-on-flash/

        -->

        <div style="text-align: center; width: 100%; margin-top: 1%;">
        </div>

        <audio autoplay="autoplay" playcount="999" id="looper" loop="true">
            <source src="NGU.mp3"></source>
        </audio>

        <div style="text-align: center; width: 100%; display:none;" id="start_container">
            <a href="javascript:start();" style="font-family: Helvetica; font-size: 44px;">Start Navigation</a>
        </div>

        <script type="text/javascript">

            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-8093261-3']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

            spinner = document.getElementById('spinner');
            angle = 0;

            function spin() {
                angle = angle + 80;
                if (angle > 360) angle = angle - 360;
                spinner.setAttribute("transform","rotate(" + angle + ", 81, 69)");
                setTimeout("spin()", 100);
            }

            function start() {
                document.getElementById('looper').play();
                document.getElementById('start_container').style.display = 'none';
                spin();
                document.querySelector('audio').play();
            }

            var promise = document.querySelector('audio').play();

            if (promise !== undefined) {
              promise.then(_ => {
                spin();
              }).catch(error => {
                document.getElementById('start_container').style.display = 'block';
              });
            }

        </script>
  </body>
</html>
